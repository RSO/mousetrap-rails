<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Mousetrap-rails by kugaevsky</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/kugaevsky/mousetrap-rails">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Mousetrap-rails</h1>
            <h2>Rails gem for handling keyboard shortcuts via mousetrap javascript library</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/kugaevsky/mousetrap-rails/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/kugaevsky/mousetrap-rails/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1>
<a id="mousetraprails" class="anchor" href="#mousetraprails" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mousetrap::Rails</h1>

<p><a href="http://badge.fury.io/rb/mousetrap-rails"><img src="https://badge.fury.io/rb/mousetrap-rails.svg" alt="Gem Version"></a> <a href="https://gemnasium.com/kugaevsky/mousetrap-rails"><img src="https://gemnasium.com/kugaevsky/mousetrap-rails.png" alt="Dependency Status"></a> <a href="https://codeclimate.com/github/kugaevsky/mousetrap-rails"><img src="https://codeclimate.com/github/kugaevsky/mousetrap-rails.png" alt="Code Climate"></a> <a href="https://travis-ci.org/kugaevsky/mousetrap-rails"><img src="https://travis-ci.org/kugaevsky/mousetrap-rails.png?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/r/kugaevsky/mousetrap-rails"><img src="https://coveralls.io/repos/kugaevsky/mousetrap-rails/badge.png?branch=master" alt="Coverage Status"></a> <a href="https://gratipay.com/kugaevsky/"><img src="https://img.shields.io/gratipay/kugaevsky.svg" alt="Gratipay"></a></p>

<p><a href="https://github.com/ccampbell/mousetrap">Mousetrap</a> is a javascript library for handling keyboard shortcuts in your web applications written by <a href="http://craig.is/">Craig Campbell</a>.</p>

<p>The <code>mousetrap-rails</code> gem integrates Mousetrap javascript library with Rails asset pipeline.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a id="add-mousetrap-rails-gem-to-app" class="anchor" href="#add-mousetrap-rails-gem-to-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add mousetrap-rails gem to app</h3>

<p>Add this line to your application's Gemfile:</p>

<div class="highlight highlight-ruby"><pre><span class="pl-k">gem</span> <span class="pl-s1"><span class="pl-pds">'</span>mousetrap-rails<span class="pl-pds">'</span></span></pre></div>

<p>And then execute:</p>

<div class="highlight highlight-bash"><pre>$ bundle install</pre></div>

<h3>
<a id="run-generator" class="anchor" href="#run-generator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run generator</h3>

<div class="highlight highlight-bash"><pre>$ rails generate mousetrap:install</pre></div>

<p>It will create a sample <code>keybindings.js.coffee</code> file in <code>app/assets/javascripts</code> and insert mousetrap-rails files to manifests of asset pipeline</p>

<div class="highlight highlight-coffeescript"><pre><span class="pl-k">//=</span> <span class="pl-s3">require</span> mousetrap     <span class="pl-c"># ---&gt; application.js</span>
<span class="pl-k">*=</span> <span class="pl-s3">require</span> mousetrap      <span class="pl-c"># ---&gt; application.css</span></pre></div>

<p>Voila!</p>

<p>Also you can use mousetrap plugins. Require them in your <code>application.js</code> file</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">//= require mousetrap/plugins       # To require all plugins</span>
<span class="pl-c">//= require mousetrap/dictionary    # To require dictionary plugin</span>
<span class="pl-c">//= require mousetrap/global        # To require global plugin</span>
<span class="pl-c">//= require mousetrap/pause         # To require pause plugin</span>
<span class="pl-c">//= require mousetrap/record        # To require record plugin</span></pre></div>

<p>See plugin descriptions below.</p>

<h3>
<a id="latest-may-be-unstable-version" class="anchor" href="#latest-may-be-unstable-version" aria-hidden="true"><span class="octicon octicon-link"></span></a>Latest (may be unstable) version</h3>

<p>Instead of <code>gem 'mousetrap-rails'</code> add to your Gemfile</p>

<div class="highlight highlight-ruby"><pre><span class="pl-k">gem</span> <span class="pl-s1"><span class="pl-pds">'</span>mousetrap-rails<span class="pl-pds">'</span></span>, <span class="pl-c1">github:</span> <span class="pl-s1"><span class="pl-pds">'</span>kugaevsky/mousetrap-rails<span class="pl-pds">'</span></span></pre></div>

<p><code>Mousetrap-rails</code> versioning use <code>mousetrap.js</code> library version number.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a id="via-data-attributes" class="anchor" href="#via-data-attributes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Via data-attributes</h3>

<p>You can add keyboard navigation to your links by using <code>data-keybinding</code> attribute.</p>

<div class="highlight highlight-haml"><pre>=<span class="pl-sre"> <span class="pl-s3">link_to</span> <span class="pl-s1"><span class="pl-pds">'</span>Homepage<span class="pl-pds">'</span></span>, root_path, <span class="pl-c1">data:</span> { <span class="pl-c1">keybinding:</span> <span class="pl-s1"><span class="pl-pds">'</span>h<span class="pl-pds">'</span></span> }          <span class="pl-c"># Press 'h' to navigate to homepage</span></span>
=<span class="pl-sre"> <span class="pl-s3">link_to</span> <span class="pl-s1"><span class="pl-pds">'</span>About<span class="pl-pds">'</span></span>, about_path, <span class="pl-c1">data:</span> { <span class="pl-c1">keybinding:</span> <span class="pl-s1"><span class="pl-pds">'</span>["a", "c"]<span class="pl-pds">'</span></span> }   <span class="pl-c"># Press 'a' or 'c' to navigate to about</span></span></pre></div>

<p>You can jump to an input</p>

<div class="highlight highlight-haml"><pre>=<span class="pl-sre"> text_field_tag <span class="pl-s1"><span class="pl-pds">'</span>Username<span class="pl-pds">'</span></span>, <span class="pl-c1">nil</span>, <span class="pl-c1">data:</span> { <span class="pl-c1">keybinding:</span> <span class="pl-s1"><span class="pl-pds">'</span>u<span class="pl-pds">'</span></span> }         <span class="pl-c"># Press 'u' to focus username input field</span></span></pre></div>

<h3>
<a id="via-javascript" class="anchor" href="#via-javascript" aria-hidden="true"><span class="octicon octicon-link"></span></a>Via javascript</h3>

<p>Any javascript function can be called with mousetrap</p>

<div class="highlight highlight-coffeescript"><pre>Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>f<span class="pl-pds">'</span></span>, <span class="pl-vpf">(e)</span> <span class="pl-st">-&gt;</span> alert <span class="pl-s1"><span class="pl-pds">'</span>My perfect function called<span class="pl-pds">'</span></span>       <span class="pl-c"># Press 'f' to popup alert</span></pre></div>

<h3>
<a id="more-examples-from-official-guide" class="anchor" href="#more-examples-from-official-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>More examples (from official guide)</h3>

<div class="highlight highlight-coffeescript"><pre><span class="pl-c"># single keys</span>
Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>4<span class="pl-pds">'</span></span>, <span class="pl-st">-&gt;</span> alert <span class="pl-s1"><span class="pl-pds">'</span>4 pressed!<span class="pl-pds">'</span></span>
Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>x<span class="pl-pds">'</span></span>, (<span class="pl-st">-&gt;</span> alert <span class="pl-s1"><span class="pl-pds">'</span>x pressed!<span class="pl-pds">'</span></span>), <span class="pl-s1"><span class="pl-pds">'</span>keyup<span class="pl-pds">'</span></span>

<span class="pl-c"># combinations</span>
Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>command+shift+k<span class="pl-pds">'</span></span>, <span class="pl-st">-&gt;</span>
  alert <span class="pl-s1"><span class="pl-pds">'</span>command+shift+k pressed!<span class="pl-pds">'</span></span>
  <span class="pl-c1">false</span>

Mousetrap.bind [<span class="pl-s1"><span class="pl-pds">'</span>command+k<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>ctrl+k<span class="pl-pds">'</span></span>], <span class="pl-st">-&gt;</span>
  alert <span class="pl-s1"><span class="pl-pds">'</span>command+k or ctrl+k pressed!<span class="pl-pds">'</span></span>
  <span class="pl-c1">false</span>

<span class="pl-c"># gmail style sequences</span>
Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>g i<span class="pl-pds">'</span></span>, <span class="pl-st">-&gt;</span> <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>g i sequence pressed!<span class="pl-pds">'</span></span>
Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>* a<span class="pl-pds">'</span></span>, <span class="pl-st">-&gt;</span> <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>* a sequence pressed!<span class="pl-pds">'</span></span>

<span class="pl-c"># konami code!</span>
Mousetrap.bind <span class="pl-s1"><span class="pl-pds">'</span>up up down down left right left right b a enter<span class="pl-pds">'</span></span>, <span class="pl-st">-&gt;</span> <span class="pl-en">console</span>.<span class="pl-s3">log</span> <span class="pl-s1"><span class="pl-pds">'</span>You WIN!<span class="pl-pds">'</span></span></pre></div>

<p>You can find full documentation on <a href="http://craig.is/killing/mice">Mousetrap library page</a>. Really, look there – there are plenty examples of using this awesome library.</p>

<h3>
<a id="key-binding-hints-experimental" class="anchor" href="#key-binding-hints-experimental" aria-hidden="true"><span class="octicon octicon-link"></span></a>Key binding hints (experimental)</h3>

<p>You can display key binding hints near links with <code>data-keybinding</code> attribute by pressing <code>Alt+Shift+h</code>. Now it's just experimental feature for debugging purposes only.</p>

<h2>
<a id="plugins" class="anchor" href="#plugins" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plugins</h2>

<h3>
<a id="global-bindings" class="anchor" href="#global-bindings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Global Bindings</h3>

<pre><code>//= require mousetrap/global        # ---&gt; application.js
</code></pre>

<p>This extension allows you to specify keyboard events that will work anywhere including inside textarea/input fields.</p>

<div class="highlight highlight-coffeescript"><pre>Mousetrap.bindGlobal <span class="pl-s1"><span class="pl-pds">'</span>ctrl+s<span class="pl-pds">'</span></span>, <span class="pl-st">-&gt;</span> _save()</pre></div>

<p>This means that a keyboard event bound using <code>Mousetrap.bind</code> will only work outside of form input fields, but using <code>Moustrap.bindGlobal</code> will work in both places.</p>

<h3>
<a id="bind-dictionary" class="anchor" href="#bind-dictionary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bind dictionary</h3>

<pre><code>//= require mousetrap/dictionary        # ---&gt; application.js
</code></pre>

<p>This extension overwrites the default bind behavior and allows you to bind multiple combinations in a single bind call.</p>

<p>Usage looks like:</p>

<div class="highlight highlight-coffeescript"><pre>Mousetrap.bind
    <span class="pl-s1"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-st">-&gt;</span> <span class="pl-en">console</span>.<span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>)
    <span class="pl-s1"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-st">-&gt;</span> <span class="pl-en">console</span>.<span class="pl-s3">log</span>(<span class="pl-s1"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>)</pre></div>

<p>You can optionally pass in <code>keypress</code>, <code>keydown</code> or <code>keyup</code> as a second argument.</p>

<p>Other bind calls work the same way as they do by default.</p>

<h3>
<a id="pauseunpause" class="anchor" href="#pauseunpause" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pause/unpause</h3>

<pre><code>//= require mousetrap/pause             # ---&gt; application.js
</code></pre>

<p>This extension allows Mousetrap to be paused and unpaused without having to reset keyboard shortcuts and rebind them.</p>

<div class="highlight highlight-coffeescript"><pre><span class="pl-c"># stop Mousetrap events from firing</span>
Mousetrap.pause()

<span class="pl-c"># allow Mousetrap events to fire again</span>
Mousetrap.unpause()</pre></div>

<h3>
<a id="record" class="anchor" href="#record" aria-hidden="true"><span class="octicon octicon-link"></span></a>Record</h3>

<pre><code>//= require mousetrap/record              # ---&gt; application.js
</code></pre>

<p>This extension lets you use Mousetrap to record keyboard sequences and play them back:</p>

<div class="highlight highlight-slim"><pre><span class="pl-ent">button onclick=</span><span class="pl-s1"><span class="pl-pds">"</span>recordSequence()<span class="pl-pds">"</span></span> Record</pre></div>

<div class="highlight highlight-coffeescript"><pre><span class="pl-en">recordSequence </span><span class="pl-k">=</span><span class="pl-vpf"> <span class="pl-vpf">()</span></span> <span class="pl-st"><span class="pl-st">-&gt;</span></span>
  Mousetrap.record <span class="pl-vpf">(sequence)</span> <span class="pl-st">-&gt;</span>
    <span class="pl-c"># sequence is an array like ['ctrl+k', 'c']</span>
    alert(<span class="pl-s1"><span class="pl-pds">'</span>You pressed: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> sequence.<span class="pl-s3">join</span>(<span class="pl-s1"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>))</pre></div>

<p><a href="http://craig.is/killing/mice#extensions">More detailed plugins description</a></p>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>Please submit all pull requests against latest <code>*.wip</code> branch. If your pull request contains new features, you <strong>must</strong> include relevant tests.</p>

<p>You can easily update mousetrap.js library via rake tasks.</p>

<div class="highlight highlight-bash"><pre>$ rake mousetrap:update          <span class="pl-c"># Update main mousetrap javascript lib and its plugins</span>
$ rake mousetrap:update:main     <span class="pl-c"># Update main mousetrap javascript lib</span>
$ rake mousetrap:update:plugins  <span class="pl-c"># Update mousetrap javascript lib plugins</span></pre></div>

<p>Thanks in advance!</p>

<h2>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changelog</h2>

<p>All changes could be found in <a href="https://github.com/kugaevsky/mousetrap-rails/blob/master/CHANGELOG.md">CHANGELOG.md</a></p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Gosh! It's <a href="https://github.com/kugaevsky/mousetrap-rails/blob/master/LICENSE.md">here</a>.</p>

<h2>
<a id="authors" class="anchor" href="#authors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors</h2>

<ul>
<li>mousetrap-rails gem by <a href="http://kugaevsky.ru">Nick Kugaevsky</a> and <a href="https://github.com/kugaevsky/mousetrap-rails/graphs/contributors">contributors</a>
</li>
<li>original mousetrap library by <a href="http://craig.is/">Craig Campbell</a>
</li>
</ul>

<hr>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/kugaevsky/mousetrap-rails/trend.png" alt="Bitdeli Badge"></a> <a href="http://flattr.com/thing/1233054/Mousetrap-rails-gem"><img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this"></a> <a href="http://coderwall.com/kugaevsky"><img src="http://api.coderwall.com/kugaevsky/endorsecount.png" alt="endorse"></a></p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/kugaevsky">kugaevsky</a> can be found on <a href="https://github.com/kugaevsky/mousetrap-rails">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-2540348-19");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
